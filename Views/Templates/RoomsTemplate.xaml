<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <DataTemplate x:Key="ItemTemplate">
        <Border Background="Transparent">
            <Border.InputBindings>
                <MouseBinding MouseAction="LeftDoubleClick"
                  Command="{Binding DataContext.ChatCommand, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"
                  CommandParameter="{Binding RoomNo}" />
            </Border.InputBindings>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="50"/>
                </Grid.ColumnDefinitions>
                <Grid.Style>
                    <Style TargetType="Grid">
                        <Style.Triggers>
                            <Trigger Property ="IsMouseOver" Value="True">
                                <Setter Property= "Background" Value="LightGray"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>

                <!-- 프로필 이미지 -->
                <Image Width="50" Height="50"
                  Source="/Images/cat-5183427_640.jpg"
                  Stretch="UniformToFill"
                  Grid.Column="0"/>

                <!-- 이름 + 메시지 -->
                <StackPanel Orientation="Vertical" Grid.Column="1" Margin="5,0" Background="Transparent">
                    <TextBlock Grid.Row="0" Text="{Binding Title}" FontWeight="Bold" TextTrimming="CharacterEllipsis" AutomationProperties.AutomationId="{Binding RoomNo}"/>
                    <TextBlock Grid.Row="1" Text="{Binding Chat}"
                       TextTrimming="CharacterEllipsis"
                       MaxHeight="40"
                       TextWrapping="Wrap"
                       FontSize="11"/>
                </StackPanel>

                <!-- 날짜 + 빨간 타원 -->
                <StackPanel Orientation="Vertical" Grid.Column="2"
                       HorizontalAlignment="Center" VerticalAlignment="Center"
                       Margin="5,0" Background="Transparent">
                    <TextBlock Grid.Row="0" Text="{Binding Layout_Date}"
                          FontSize="12"
                          Foreground="Gray"
                          HorizontalAlignment="Center"/>
                    <Grid Width="40" Height="30" Background="Red" Margin="0,5,0,0"
                     ClipToBounds="True" Visibility="{Binding HasUnreadCnt}">
                        <TextBlock Text="{Binding CntUnread}"
                              Foreground="White"
                              FontWeight="Bold"
                              FontSize="14"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center"
                              TextAlignment="Center"/>
                    </Grid>
                </StackPanel>
            </Grid>
        </Border>
    </DataTemplate>
    
</ResourceDictionary>